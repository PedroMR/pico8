pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- mindless

symbols = "‚Ä¶‚àß‚ßó‚ñ§üÖæÔ∏è‚óÜ‚òÖ‚ô•üê±"

ticker = {}
function add_tic(lbl)
	add(ticker,{lbl=lbl,
	x = 117, y = 14
	})
end

controls = {}
function add_btn(x,y,lbl,col)
	local b = { t="btn",
	 x=x, y=y, lbl=lbl, c=col,
	 x1=x+10, y1=y+10
	}
	add(controls,b)
	return b
end

local sel_idx=0

local bx = 30
local by = 30
for i = 1,5 do
	local b = add_btn(bx,by,i,3)
	b.idx = i
	by += 12
end

function select_button(i)
 print("i="..i.." sel_idx="..sel_idx)
 if controls[i] == nil then
	 return
 end
 
	sel_idx = i
	for b in all(controls) do
		b.sel = false
		b.on = false
	end
	controls[i].sel = true
end

select_button(1)

function _update()
 update_input()
 update_tic()
end

function update_input()
	if btnp(2) then select_button(sel_idx-1) end
	if btnp(3) then select_button(sel_idx+1) end

	if btnp(4) or btnp(5) then
	 controls[sel_idx].on = true
	 try_remove_tic(sel_idx)
	else
	 controls[sel_idx].on = false
	end
end

function try_remove_tic(sel_idx)
  local first = ticker[1]
  if first ~= nil and
   first.lbl == ""..sel_idx then
   del(ticker, first)
  end
--[[
	for t in all(ticker) do
		if t.lbl == ""..sel_idx then
			del(ticker,t)
		end
	end
]]	
end

local time_to_tic = 0

function update_tic()
 time_to_tic -= 0.025
 if time_to_tic <= 0 then
		if rnd()>0.95 then
			add_tic(ceil(rnd(5)).."")
			time_to_tic = 1
		end
 end
 --move ticker symbols
 for tic in all(ticker) do
 	tic.x -= 0.2
 	
 	if (tic.x < 10) then
 		del(ticker,tic)
 	end
 end
end

function _draw()
	rectfill(0,0,127,127,13)
	map(0,0,0,0)	
	mx = 4; my = 3
	for ctrl in all(controls) do
		rectfill(ctrl.x, ctrl.y, ctrl.x1, ctrl.y1, ctrl.c)

  -- check activation		
		if ctrl.on then color(7) else color(0) end		
		rect(ctrl.x, ctrl.y, ctrl.x1, ctrl.y1)
		print(ctrl.lbl, ctrl.x+mx, ctrl.y+my)

		if ctrl.sel then
			color(6)
		else
			color(0)
	 end
			print("‚û°Ô∏è",ctrl.x-8,ctrl.y+my)
			print("‚¨ÖÔ∏è",ctrl.x1+2,ctrl.y+my)
	end

	color(0)

 for tic in all(ticker) do
 	print(tic.lbl, tic.x, tic.y)
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000001111111111111111111111110000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00000000000000000000000000000000111111115555555500000000000000001333333333333333333333310000000000000000000000000000000000000000
00000000000000000000000000000000111111110000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00000000000000000000000000000000111111110000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00000000000000000000000000000000111111110000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00000000000000000000000000000000111111110000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00000000000000000000000000000000111111110000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00000000000000000000000000000000111111110000000000000000000000001333333333333333333333310000000000000000000000000000000000000000
00000000000000000000000000000000111111115555555500000000000000001111111111111111111111110000000000000000000000000000000000000000
__map__
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
14080909090909090909090909090a1400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
14181919191919191919191919191a1400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
