pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- flip puzzle

c={}
for i=1,8 do c[i]='r' end
c[9]='b'
px,py=2,2

function _update()
 if (btnp(0)) mv(-1,0)
 if (btnp(1)) mv( 1,0)
 if (btnp(2)) mv(0,-1)
 if (btnp(3)) mv(0, 1)
 if (btnp(4)or btnp(5)) tg()
end

function mv(dx,dy)
 local nx,ny=px+dx,py+dy
 if nx>=1 and nx<=3 and
    ny>=1 and ny<=3 then
  px,py=nx,ny
  sfx(1)
 else
  sfx(2)
 end
end

function tg()
 sfx(0)
 tgpos(px,py)
 tgpos(px+1,py)
 tgpos(px-1,py)
 tgpos(px,py+1)
 tgpos(px,py-1)
end

function tgpos(x,y)
 local t=mget(1+x, 1+y)
 local nt=0
 if (t==1) nt=2
 if (t==2) nt=1
 mset(1+x,1+y,nt)
end

function _draw()
 rectfill(0,0,127,127,1)
 map()
 print('â—†',9+px*8,9+py*8,7)
end
__gfx__
00000000cccccccc8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cccccccc8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700cccccccc8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000cccccccc8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000cccccccc8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700cccccccc8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cccccccc8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cccccccc8888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000010102000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100002145022450244502545013000120001100011000110001100010000100001000010000110001100011000110001200013000140001700024000260002700029000130002e0002e000310001300000000
000800001841015400004000040000400004000040000400004000040000400004000940009400164000940009400134001240011400114000f4000f4000e4000e4000e400154001340000400004000040000400
00050000193000e310003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300
